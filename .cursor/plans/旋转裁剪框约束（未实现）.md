<!-- aa11ffc5-c32c-4cd5-897b-0a3e568d2d40 8ce3db0e-33c9-4d3d-b4a6-205ffdb0dcb7 -->
# 旋转裁剪框约束方案

## 目标

- 理解当前 `CropHandler.clampRectToImageBounds` 的旋转边界处理流程
- 调整逻辑以在任意旋转角度下限制裁剪框四角都位于图片内部
- 完成必要的手动或单元测试验证

## 实施步骤

1. 阅读 `lib/controller/crop_handler.dart` 与 `CoordinateTransformer`，梳理旋转裁剪框约束流程。
2. 设计并实现新的边界约束策略，例如基于裁剪框四角点进出检测和动态收缩/平移，确保不会超出旋转图片多边形。
3. 更新或新增测试／调试脚本，验证 20° 等典型角度下裁剪框不会越界，并记录说明。

### To-dos

- [ ] 梳理 `crop_handler.dart` 现有旋转裁剪约束实现，确认现存问题出现的条件。
- [ ] 实现改进后的裁剪框约束策略，保障裁剪框在任意旋转角度内，必要时重构辅助函数。
- [ ] 通过模拟或测试验证 20° 等角度下裁剪框行为，并更新文档/注释。